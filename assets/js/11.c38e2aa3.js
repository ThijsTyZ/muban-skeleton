(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{438:function(t,a,e){"use strict";e.r(a);var s=e(52),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"pages"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pages"}},[t._v("#")]),t._v(" Pages")]),t._v(" "),e("p",[t._v('The "pages" in the Muban Skeleton are purely for previewing your components (locally) before any server rendered pages\nare available. Individual components can be previewed in storybook, but pages offer a more complete way of seeing\nmultiple components together, surrounded by an optional header or footer, or animating when they scroll into view.')]),t._v(" "),e("p",[t._v("Since pages are rendered by templates, which is normally done on the server, the JS components don't have any influence\non how they are rendered - they merely become active after everything has already rendered.")]),t._v(" "),e("p",[t._v('These component templates need data, and since the JS components can\'t provide that data, it has to come from somewhere\nelse. Each "page" is a TypeScript file that exports a '),e("code",[t._v("data")]),t._v(" function, and contains all the data that is needed to\nrender all the templates for that page. Moreover, the data files often decide which components are rendered on the page.")]),t._v(" "),e("h2",{attrs:{id:"the-page-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#the-page-file"}},[t._v("#")]),t._v(" The page file")]),t._v(" "),e("p",[t._v("To summarize before we start, the page file:")]),t._v(" "),e("ul",[e("li",[t._v("Is located in the "),e("code",[t._v("/src/pages/")]),t._v(" folder.")]),t._v(" "),e("li",[t._v("Has its filename written in "),e("code",[t._v("snake-case.ts")]),t._v(".")]),t._v(" "),e("li",[t._v("Has to export a "),e("code",[t._v("data")]),t._v(" function that should return an object according to the "),e("code",[t._v("AppTemplateProps")]),t._v(" shape.")]),t._v(" "),e("li",[t._v("Can conditionally export a function that returns metadata for the page "),e("code",[t._v("<head>")]),t._v(".")]),t._v(" "),e("li",[t._v("Can exist in sub-folders.")]),t._v(" "),e("li",[t._v("Will be generated as a "),e("code",[t._v(".html")]),t._v(" file with the same name/path.")])]),t._v(" "),e("p",[t._v("In short, that should look like this.")]),t._v(" "),e("div",{staticClass:"language-ts extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ts"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// pages/index.ts")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" AppTemplateProps "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../App.template'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" AppTemplateProps "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ... page data")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h3",{attrs:{id:"template"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#template"}},[t._v("#")]),t._v(" Template")]),t._v(" "),e("p",[t._v("For each page that we render, we start with the "),e("code",[t._v("appTemplate")]),t._v(" - it also has a corresponding "),e("code",[t._v("App")]),t._v(" component that will\nbe mounted after the page has been rendered. The "),e("code",[t._v("appTemplate")]),t._v(' decides which child templates to render for each\nspecific page based on the data provided for that page. It does so by creating a "map" with all possible templates,\nand based on the data for that page, it picks one (or multiple) templates to render, passing along the props that\nbelong with that child template.')]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Types")]),t._v(" "),e("p",[t._v("Note that the data function is typed as "),e("code",[t._v("AppTemplateProps")]),t._v(". This is because this function must return data that will\nbe passed to the "),e("code",[t._v("appTemplate")]),t._v(". In turn, the "),e("code",[t._v("AppTemplateProps")]),t._v(" will include the types of its child templates, making\nsure everything is typed, down to the most nested child component.")])]),t._v(" "),e("p",[t._v("The corresponding "),e("code",[t._v("App")]),t._v(" component registers the same child components to initialize them whenever they are rendered\non the page.")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("App")]),t._v(" and the "),e("code",[t._v("BlockRenderer")]),t._v(" are 2 components that make use of this method of dynamically rendering a child\ncomponent. There are two variations; either rendering a single child component (selected from multiple options), or\nrendering a list of child components (each one selected from multiple options).")]),t._v(" "),e("div",{staticClass:"language-ts extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ts"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// App.template.ts")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AppTemplateProps")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  layout"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" LayoutDefault"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("displayName"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" props"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LayoutDefaultTemplateProps "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" LayoutCustom"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("displayName"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" props"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LayoutCustomTemplateProps "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("appTemplate")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" layout "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" AppTemplateProps"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" html"),e("span",{pre:!0,attrs:{class:"token template-string"}},[e("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("<div data-component=")]),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("App"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("displayName"),e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v(">\n    ")]),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderLazyComponentTemplate")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("LayoutDefault"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("displayName"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" layoutDefaultTemplate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("LayoutCustom"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("displayName"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" layoutCustomTemplate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" component"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" layout "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n  </div>")]),e("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("Some things to highlight:")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("In the App template, we can choose 1 layout to render for this page")])]),t._v(" "),e("li",[e("p",[t._v("In the template function, we use the "),e("code",[t._v("renderLazyComponentTemplate")]),t._v(" helper to:")]),t._v(" "),e("ul",[e("li",[t._v("register the available options, using the component "),e("code",[t._v("displayName")]),t._v(" as key")]),t._v(" "),e("li",[t._v("pass either "),e("code",[t._v("component")]),t._v(" (in this case) or "),e("code",[t._v("components")]),t._v(" (to render multiple)")])])]),t._v(" "),e("li",[e("p",[t._v("In "),e("code",[t._v("AppTemplateProps")]),t._v(", we use a union of all the possible child components to render, for each one providing its\nname and its props.")])])]),t._v(" "),e("h3",{attrs:{id:"component"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#component"}},[t._v("#")]),t._v(" Component")]),t._v(" "),e("p",[t._v("The component is simpler, just listing the child components to initialize, using the "),e("code",[t._v("lazy")]),t._v(" helper to support code\nsplitting.")]),t._v(" "),e("div",{staticClass:"language-ts extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ts"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// App.ts")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" App "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  components"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("lazy")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'layout-default'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* webpackExports: "lazy" */')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./components/layouts/DefaultLayout'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("lazy")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'layout-custom'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* webpackExports: "lazy" */')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./components/layouts/CustomLayout'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);